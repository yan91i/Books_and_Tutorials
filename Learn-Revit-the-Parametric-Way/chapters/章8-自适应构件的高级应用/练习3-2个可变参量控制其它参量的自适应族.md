# 练习3: 2个可变参量控制其它参量的自适应族

## 练习目的

掌握如何通过2个可变参量控制其它参量。

## 打开练习文件

双击打开下载资源包中“章8-自适应构件的高级应用\练习3-2个可变参量控制其它参量的自适应族”文件夹中的"2个可变参量控制其它参量的自适应族-Begin.rfa"文件，打开如下图所示的练习文件。

![2个可变参量控制其它参量的自适应族0.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族0.png)

这个练习文件里有一个自适应构件, 它的创建过程如下：

1. 创建6个自适应点（点1，点2，点3，点4, 点5，和点6）。
2. 分别连接其中的两个自适应点（点1至点2，点2至点3，点3至点4，点4至点1），生成4条样条曲线。
3. 通过这4条样条曲线生成一个面。
4. 通过“实心形状”把这个面拉伸成一个立方体。
5. 找到连接点1和点2的样条曲线的中点，和连接点3和点4的样条曲线的中点。
6. 连接这两个中点，生成一条样条曲线。
7. 在这条样条曲线的中点，通过“空心形状”生成一个圆柱体，这个圆柱体和这个立方体进行布尔运算,得出文件里的这个几何形状。

这个练习和1个可变参量控制其它参量的自适应族的练习相比，多了一个自适应点6，同时，在参量上多了一个点1至点6的距离，中心圆的半径的数值加入了和点1至点6的距离的关联因素，即中心圆的半径（默认）= (点1至点6的距离 + 点2至点5的距离) / 2。

在这个练习文件中，点2至点5的距离和点1至点6的距离都是动态的数据，而中心圆的半径跟点2至点5的距离和点1至点6的距离有关联，即中心圆的半径（默认）= (点1至点6的距离 + 点2至点5的距离) / 2。如果点2至点5的距离和点1至点6的距离动态地发生了变化，中心圆的半径也会动态地发生相应的变化。

## 开始做

### 1. 单击功能区里的“族类型”。

![2个可变参量控制其它参量的自适应族1a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族1a.png)

#### 你会看到：弹出了“族类型”的对话框。在尺寸标注里有4个参数，它们分别是：

中心圆的半径（默认），值是2500.0(2.5米)，公式是：(点1至点6的距离 + 点2至点5的距离) / 2；

嵌板的厚度，值是100.0(10厘米)；

点1至点6的距离 (报告)，值是2500.0(2.5米)；

点2至点5的距离 (报告)，值是2500.0(2.5米)；

![2个可变参量控制其它参量的自适应族1b.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族1b.png)

### 2.鼠标移动到中心圆的半径（默认）的值的方形框内，单击，修改值为2000.0（2米），然后单击“确定”。

![2个可变参量控制其它参量的自适应族2a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族2a.png)

#### 你会看到：中心圆的半径的值没有改变，还是2500.0(2.5米)。

![2个可变参量控制其它参量的自适应族2b.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族2b.png)

### 3. 单击“确定”，然后鼠标移动到三维视图中的自适应点5，单击它。

![2个可变参量控制其它参量的自适应族3a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族3a.png)

#### 你会看到：自适应点5出现了三个方向的坐标箭头（蓝色，绿色和黄色），同时“点2至点5的距离 = 2500”变成了蓝色。

![2个可变参量控制其它参量的自适应族3b.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族3b.png)

### 4. 单击蓝色的“点2至点5的距离 = 2500”，修改值为1500.0（1.5米），按下键盘上的 Enter 键。

![2个可变参量控制其它参量的自适应族4a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族4a.png)

#### 你会看到：参照点之间的距离变成了1500（1.5米），同时中心圆的半径变成了2000（2米）。

![2个可变参量控制其它参量的自适应族4b.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族4b.png)

### 5. 单击功能区里的“族类型”。

![2个可变参量控制其它参量的自适应族5a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族5a.png)

#### 你会看到：弹出了“族类型”对话框。点2至点5的距离 (报告)变成了1500.0（1.5米），同时，鼠标移动到中心圆的半径（默认）的值变成了2000.0（2米）。

![2个可变参量控制其它参量的自适应族5b.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族5b.png)

### 6. 鼠标移动到“中心圆的半径（默认）”的公式的方形框内，修改公式为“= (点1至点6的距离 + 点2至点5的距离) / 10”，然后单击“应用（A）”。

![2个可变参量控制其它参量的自适应族6a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族6a.png)

#### 你会看到：族类型的中心圆的半径变成了400.0（0.4米），同时三维视图上的中心圆变化到了相应的尺寸。

![2个可变参量控制其它参量的自适应族6b1.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族6b1.png)

![2个可变参量控制其它参量的自适应族6b2.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族6b2.png)

### 7. 鼠标移动到“中心圆的半径（默认）”的公式的方形框内，修改公式为“= (点1至点6的距离 + 点2至点5的距离) / 2”，然后单击“应用（A）”。

![2个可变参量控制其它参量的自适应族7a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族7a.png)

#### 你会看到：族类型的中心圆的半径变成了2000.0（2米），同时三维视图上的中心圆变化到了相应的尺寸。

![2个可变参量控制其它参量的自适应族7b1.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族7b1.png)

![2个可变参量控制其它参量的自适应族7b2.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族7b2.png)

### 8. 鼠标移动到“中心圆的半径（默认）”的公式的方形框内，修改公式为“= if ((点1至点6的距离 + 点2至点5的距离) / 2 > 1500mm, 1500mm, (点1至点6的距离 + 点2至点5的距离) / 2)”，然后单击“应用（A）”。

![2个可变参量控制其它参量的自适应族8a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族8a.png)

#### 你会看到：族类型的中心圆的半径变成了1500.0（1.5米），同时三维视图上的中心圆变化到了相应的尺寸。

![2个可变参量控制其它参量的自适应族8b1.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族8b1.png)

![2个可变参量控制其它参量的自适应族8b2.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族8b2.png)

### 9. 鼠标移动到“中心圆的半径（默认）”的公式的方形框内，修改公式为“=if ((点1至点6的距离 + 点2至点5的距离) / 2 > 1500mm, 2000mm, (点1至点6的距离 + 点2至点5的距离) / 2)”，然后单击“应用（A）”。

![2个可变参量控制其它参量的自适应族9a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族9a.png)

#### 你会看到：族类型的中心圆的半径变成了2000.0（2米），同时三维视图上的中心圆变化到了相应的尺寸。

![2个可变参量控制其它参量的自适应族9b1.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族9b1.png)

![2个可变参量控制其它参量的自适应族9b2.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族9b2.png)

### 10. 鼠标移动到“中心圆的半径（默认）”的公式的方形框内，修改公式为“= if ((点1至点6的距离 + 点2至点5的距离) / 2 > 2500mm, 2000mm, (点1至点6的距离 + 点2至点5的距离) / 2)”，然后单击“应用（A）”。

#### 你会看到：族类型的中心圆的半径还是2000.0（2米），同时三维视图上的中心圆的尺寸没有变。

![2个可变参量控制其它参量的自适应族10b.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族10b.png)

### 11. 把鼠标移动到“中心圆的半径（默认）”的公式的方形框内，修改公式为“= if ((点1至点6的距离 + 点2至点5的距离) / 2 > 1500mm, 1500mm, (点1至点6的距离 + 点2至点5的距离) / 2)”，然后单击“确定”。

![2个可变参量控制其它参量的自适应族11a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族11a.png)

#### 你会看到：族类型的中心圆的半径变成了1500.0（1.5米），同时三维视图上的中心圆变化到了相应的尺寸。

![2个可变参量控制其它参量的自适应族11b1.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族11b1.png)

![2个可变参量控制其它参量的自适应族11b2.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族11b2.png)

### 12. 鼠标移动到三维视图中的自适应点6，单击它，然后单击出现的红色的箭头，并按下左键，让鼠标随意移动。

![2个可变参量控制其它参量的自适应族12a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族12a.png)

#### 你会看到：当这个自适应点随着红色箭头向左方移动时，参照点之间的距离在变化，但是中心圆的半径没有变化；当红色箭头向右方移动时，参照点之间的距离在变化，三维视图上的中心圆变化到了相应的尺寸。

![2个可变参量控制其它参量的自适应族12b.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族12b.png)

### 13. 单击出现的绿色的箭头，并按下左键，让鼠标随意移动。

![2个可变参量控制其它参量的自适应族13a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族13a.png)

#### 你会看到：当这个自适应点随着绿色箭头的移动时，相应地移动，同时参照点之间的距离在变化，三维视图上的中心圆变化到了相应的尺寸。

![2个可变参量控制其它参量的自适应族13b.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族13b.png)

### 14. 单击出现的蓝色的箭头，并按下左键，让鼠标随意移动。

![2个可变参量控制其它参量的自适应族14a.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族14a.png)

#### 你会看到：当这个自适应点随着绿色箭头的移动时，相应地移动，但是参照点之间的距离没有变化。同时三维视图上的中心圆的尺寸也没有变化。

![2个可变参量控制其它参量的自适应族14b.png](/images/2个可变参量控制其它参量的自适应族/2个可变参量控制其它参量的自适应族14b.png)

## 继续做

1. 修改族类型中嵌板的厚度的值为10000(1米)，看一看模型的变化；修改值为-10000，看一看Revit跳出的错误提示。
2. 选中自适应点1，2，3，4中的任意一个点，拖动蓝色的箭头，看一看Revit跳出的提示，然后单击“删除尺寸标注”，看一下Revit模型发生了什么变化。
3. 修改族类型中中心圆的半径的公式，删掉最后的“）”，看一看Revit跳出的错误提示。
4. 修改族类型中中心圆的半径的公式，把其中的","全部替换成";"，看一看Revit跳出的错误提示。

